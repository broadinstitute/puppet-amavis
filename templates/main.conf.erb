# COMMONLY ADJUSTED SETTINGS:

<% if @bypass_virus_checks_maps %>@bypass_virus_checks_maps = (
  <% @bypass_virus_checks_maps.each do |amap| %><%= amap %>,<% end %>
);
<% end -%>
<% if @bypass_spam_checks_maps %>@bypass_spam_checks_maps = (
  <% @bypass_spam_checks_maps.each do |amap| %><%= amap %>,<% end %>
);
<% end -%>
<% if @bypass_decode_parts %>@bypass_decode_parts = (
  <% @bypass_decode_parts.each do |amap| %><%= amap %>,<% end %>
);
<% end -%>
<% if @max_servers %>$max_servers = <%= @max_servers %>;
<% end -%>
<% if @_daemon_user %>$daemon_user = '<%= @_daemon_user %>';
<% end -%>
<% if @_daemon_group %>$daemon_group = '<%= @_daemon_group %>';
<% end -%>
<% if @mydomain %>$mydomain = '<%= @mydomain %>';
<% end -%>
<% if @myhome %>$MYHOME = '<%= @myhome %>';
<% end -%>
<% if @tempbase %>$TEMPBASE = "<%= @tempbase %>";
<% end -%>
<% if @tmpdir %>$ENV{TMPDIR} = "<%= @tmpdir %>";
<% end -%>
<% if @quarantinedir %>$QUARANTINEDIR = "<%= @quarantinedir %>";
<% else -%>
$QUARANTINEDIR = undef;
<% end -%>
<% if @quarantine_subdir_levels %>$quarantine_subdir_levels = "<%= @quarantine_subdir_levels %>";
<% end -%>
<% if @release_format %>$release_format = "<%= @release_format %>";
<% end -%>
<% if @report_format %>$report_format = "<%= @report_format %>";
<% end -%>
<% if @daemon_chroot_dir %>$daemon_chroot_dir = "<%= @daemon_chroot_dir %>";
<% end -%>
<% if @db_home %>$db_home = "<%= @db_home %>";
<% end -%>
<% if @helpers_home %>$helpers_home = "<%= @helpers_home %>";
<% end -%>
<% if @_lock_file %>$lock_file = "<%= @_lock_file %>";
<% end -%>
<% if @_pid_file %>$pid_file = "<%= @_pid_file %>";
<% end -%>
<% if @log_level %>$log_level = <%= @log_level %>;
<% end -%>
<% if @log_recip_templ %>$log_recip_templ = <%= @log_recip_templ %>;
<% else -%>
$log_recip_templ = undef;
<% end -%>
<% if @do_syslog %>$do_syslog = <%= @do_syslog %>;
<% end -%>
<% if @syslog_facility %>$syslog_facility = "<%= @syslog_facility %>";
<% end -%>
<% if @enable_db %>$enable_db = <%= @enable_db %>;
<% end -%>
<% if @enable_zmq %>$enable_zmq = <%= @enable_zmq %>;
<% end -%>
<% if @nanny_details_level %>$nanny_details_level = <%= @nanny_details_level %>;
<% end -%>
<% if @enable_dkim_verification %>$enable_dkim_verification = <%= @enable_dkim_verification %>;
<% end -%>
<% if @enable_dkim_signing %>$enable_dkim_signing = <%= @enable_dkim_signing %>;
<% end -%>
<% if @local_domains_maps %>@local_domains_maps = ( [<% @local_domains_maps.each do |domain| %>"<%= domain %>",<% end -%>] );
<% end -%>
<% if @mynetworks %>@mynetworks = qw( <% @mynetworks.each do |network| %><%= network %> <% end -%> );
<% end -%>
<% if @_unix_socketname %>$unix_socketname = <%= @_unix_socketname %>;
<% end -%>
<% if @inet_socket_port %>$inet_socket_port = [<% @inet_socket_port.each do |port| %>"<%= port %>",<% end -%>];
<% end -%>

<% if @policy_bank -%>
<% @policy_bank.each_pair do |bank_key, bank_hash| -%>
$policy_bank{'<%= bank_key %>'} = {
<% bank_hash.each_pair do |bank_hash_key, bank_hash_value| %>  <%= bank_hash_key %> => <%= bank_hash_value %>,
<% end -%>
};

<% end -%>
<% end -%>
<% @interface_policy.each_pair do |interface_key, interface_value| -%>
$interface_policy{'<%= interface_key %>'} = '<%= interface_value %>';
<% end -%>

<% if @sa_tag_level_deflt %>$sa_tag_level_deflt = <%= @sa_tag_level_deflt %>;
<% end -%>
<% if @sa_tag2_level_deflt %>$sa_tag2_level_deflt = <%= @sa_tag2_level_deflt %>;
<% end -%>
<% if @sa_kill_level_deflt %>$sa_kill_level_deflt = <%= @sa_kill_level_deflt %>;
<% end -%>
<% if @sa_dsn_cutoff_level %>$sa_dsn_cutoff_level = <%= @sa_dsn_cutoff_level %>;
<% end -%>
<% if @sa_crediblefrom_dsn_cutoff_level %>$sa_crediblefrom_dsn_cutoff_level = <%= @sa_crediblefrom_dsn_cutoff_level %>;
<% end -%>
<% if @sa_quarantine_cutoff_level %>$sa_quarantine_cutoff_level = <%= @sa_quarantine_cutoff_level %>;
<% end -%>
<% if @penpals_bonus_score %>$penpals_bonus_score = <%= @penpals_bonus_score %>;
<% end -%>
<% if @penpals_threshold_high %>$penpals_threshold_high = <%= @penpals_threshold_high %>;
<% end -%>
<% if @bounce_killer_score %>$bounce_killer_score = <%= @bounce_killer_score %>;
<% end -%>
<% if @sa_mail_body_size_limit %>$sa_mail_body_size_limit = <%= @sa_mail_body_size_limit %>;
<% end -%>
<% if @sa_local_tests_only %>$sa_local_tests_only = <%= @sa_local_tests_only %>;
<% end -%>
<% if @lookup_sql_dsn %>@lookup_sql_dsn = (
  <% @lookup_sql_dsn.each do |dsn| %>[<%= dsn %>],
<% end -%>
);
<% end -%>
<% if @storage_sql_dsn %>@storage_sql_dsn = <%= @storage_sql_dsn %>;
<% end -%>
<% if @storage_redis_dsn %>@storage_redis_dsn = (
<% @storage_redis_dsn.each do |dsn| %>
  {<% dsn.each_pair do |dsn_key, dsn_value| %><%= dsn_key %>=><%= dsn_value %>,<% end %>},
<% end -%>
);
<% end -%>
<% if @redis_logging_key %>$redis_logging_key = <%= @redis_logging_key %>;
<% end -%>
<% if @redis_logging_queue_size_limit %>$redis_logging_queue_size_limit = <%= @redis_logging_queue_size_limit %>;
<% end -%>
<% if @timestamp_fmt_mysql %>$timestamp_fmt_mysql = <%= @timestamp_fmt_mysql %>;
<% end -%>
<% if @virus_admin %>$virus_admin = "<%= @virus_admin %>";
<% else -%>
$virus_admin = undef;
<% end -%>
<% if @virus_admin %>$virus_admin = "<%= @virus_admin %>";
<% else -%>
$virus_admin = undef;
<% end -%>
<% if @mailfrom_notify_admin %>$mailfrom_notify_admin = "<%= @mailfrom_notify_admin %>";
<% else -%>
$mailfrom_notify_admin = undef;
<% end -%>
<% if @mailfrom_notify_recip %>$mailfrom_notify_recip = "<%= @mailfrom_notify_recip %>";
<% else -%>
$mailfrom_notify_recip = undef;
<% end -%>
<% if @mailfrom_notify_spamadmin %>$mailfrom_notify_spamadmin = "<%= @mailfrom_notify_spamadmin %>";
<% else -%>
$mailfrom_notify_spamadmin = undef;
<% end -%>
<% if @mailfrom_to_quarantine %>$mailfrom_to_quarantine = "<%= @mailfrom_to_quarantine %>";
<% else -%>
$mailfrom_to_quarantine = '';
<% end -%>
<% if @addr_extension_virus_maps %>@addr_extension_virus_maps = (
  <% @addr_extension_virus_maps.each do |amap| %>'<%= amap %>',
<% end -%>
);
<% end -%>
<% if @addr_extension_banned_maps %>@addr_extension_banned_maps = (
  <% @addr_extension_banned_maps.each do |amap| %>'<%= amap %>',
<% end -%>
);
<% end -%>
<% if @addr_extension_spam_maps %>@addr_extension_spam_maps = (
  <% @addr_extension_spam_maps.each do |amap| %>'<%= amap %>',
<% end -%>
);
<% end -%>
<% if @addr_extension_bad_header_maps %>@addr_extension_bad_header_maps = (
  <% @addr_extension_bad_header_maps.each do |amap| %>'<%= amap %>',
<% end -%>
);
<% end -%>
<% if @recipient_delimiter %>$recipient_delimiter = <%= @recipient_delimiter %>;
<% end -%>
<% if @path %>$path = '<%= @path %>';
<% end -%>
<% if @dspam %>$dspam = '<%= @dspam %>';
<% end -%>
<% if @maxlevels %>$MAXLEVELS = <%= @maxlevels %>;
<% end -%>
<% if @maxfiles %>$MAXFILES = <%= @maxfiles %>;
<% end -%>
<% if @min_expansion_quota %>$MIN_EXPANSION_QUOTA = <%= @min_expansion_quota %>;
<% end -%>
<% if @max_expansion_quota %>$MAX_EXPANSION_QUOTA = <%= @max_expansion_quota %>;
<% end -%>
<% if @sa_spam_subject_tag %>$sa_spam_subject_tag = '<%= @sa_spam_subject_tag %>';
<% end -%>
<% if @defang_virus %>$defang_virus = <%= @defang_virus %>;
<% end -%>
<% if @defang_banned %>$defang_banned = <%= @defang_banned %>;
<% end -%>

<% if @defang_by_ccat -%>
<% @defang_by_ccat.each do |ccat| %>$defang_by_ccat{<%= ccat %>} = 1;
<% end -%>
<% end -%>

<% if @myhostname %>$myhostname = '<%= @myhostname %>';
<% end -%>
<% if @notify_method %>$notify_method = '<%= @notify_method %>';
<% end -%>
<% if @forward_method %>$forward_method = '<%= @forward_method %>';
<% end -%>
<% if @final_virus_destiny %>$final_virus_destiny = <%= @final_virus_destiny %>;
<% end -%>
<% if @final_banned_destiny %>$final_banned_destiny = <%= @final_banned_destiny %>;
<% end -%>
<% if @final_spam_destiny %>$final_spam_destiny = <%= @final_spam_destiny %>;
<% end -%>
<% if @final_bad_header_destiny %>$final_bad_header_destiny = <%= @final_bad_header_destiny %>;
<% end -%>
<% if @bad_header_quarantine_method %>$bad_header_quarantine_method = <%= @bad_header_quarantine_method %>;
<% end -%>
<% if @os_fingerprint_method %>$os_fingerprint_method = <%= @os_fingerprint_method %>;
<% end -%>
<% if @warnbadhsender %>$warnbadhsender = <%= @warnbadhsender %>;
<% end -%>
<% if @warnvirusrecip %>$warnvirusrecip = <%= @warnvirusrecip %>;
<% end -%>
<% if @warnbannedrecip %>$warnbannedrecip = <%= @warnbannedrecip %>;
<% end -%>
<% if @warnbadhrecip %>$warnbadhrecip = <%= @warnbadhrecip %>;
<% end -%>

<% if @clean_quarantine_method %>$clean_quarantine_method = <%= @clean_quarantine_method %>;
<% end -%>
<% if @virus_quarantine_to %>$virus_quarantine_to = <%= @virus_quarantine_to %>;
<% end -%>
<% if @banned_quarantine_to %>$banned_quarantine_to = <%= @banned_quarantine_to %>;
<% end -%>
<% if @bad_header_quarantine_to %>$bad_header_quarantine_to = <%= @bad_header_quarantine_to %>;
<% end -%>
<% if @spam_quarantine_to %>$spam_quarantine_to = <%= @spam_quarantine_to %>;
<% end -%>
<% if @defang_bad_header %>$defang_bad_header = <%= @defang_bad_header %>;
<% end -%>
<% if @defang_undecipherable %>$defang_undecipherable = <%= @defang_undecipherable %>;
<% end -%>
<% if @defang_spam %>$defang_spam = <%= @defang_spam %>;
<% end -%>
<%#
@bypass_banned_checks_maps, @bypass_header_checks_maps,

@virus_lovers_maps, @spam_lovers_maps,
@banned_files_lovers_maps, @bad_header_lovers_maps,

@blacklist_sender_maps
-%>
